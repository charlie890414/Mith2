var MithVaultSDK=function(c,u){"use strict";function a(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function h(){var e=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}function d(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"GET",e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{headers:null,data:null,params:null},a=e.params||e.data||{},i=e.headers||{};if("client_id"in a){var o=function(t,n){var e="";if(t&&Array.isArray(t))e=t.join(",");else if(t){var a=(i=t,Object.keys(i).sort().reduce(function(t,n){return t[n]=i[n],t},{}));e=Object.keys(a).map(function(t){return"".concat(t,"=").concat(a[t])}).join("&")}else t&&(e=t.toString());var i;var o=c.HmacSHA512(e,n);return c.enc.Hex.stringify(o)}(a,c.enc.Hex.parse(this.clientSecert));i["X-Vault-Signature"]=o}var r="".concat(this.api,"/").concat(t);try{return u({method:n,url:r,params:e.params,data:e.data,headers:i}).then(function(t){return t.data}).catch(function(t){throw t})}catch(t){throw t}}function f(){return Math.floor(1e17*Math.random())}return c=c&&c.hasOwnProperty("default")?c.default:c,u=u&&u.hasOwnProperty("default")?u.default:u,function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.clientId,e=t.clientSecret,a=t.miningKey;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i),this.host="https://2019-hackathon.mithvault.io",this.api="https://2019-hackathon.api.mithvault.io",this.authorize="/#/oauth/authorize",this.donate="/#/donate",this.clientId=n,this.clientSecert=e,this.miningKey=a}var t,n,e;return t=i,(n=[{key:"getBindURI",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:h(),n={client_id:this.clientId,state:t},e=Object.keys(n).map(function(t){return"".concat(t,"=").concat(n[t])}).join("&");return"".concat(this.host).concat(this.authorize,"?").concat(e)}},{key:"getDonateURI",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n={app_id:t.appID,user_id:t.userID,amount:t.amount,state:t.state,desc:t.description},e=Object.keys(n).map(function(t){return"".concat(t,"=").concat(n[t])}).join("&");return"".concat(this.host).concat(this.donate,"?").concat(e)}},{key:"getAccessToken",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.grantCode,e=t.state,a={client_id:this.clientId,timestamp:Math.floor(Date.now()/1e3),nonce:f(),grant_code:n,state:e};return d.call(this,"oauth/token","POST",{data:a})}},{key:"delUnbindToken",value:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).token,n={client_id:this.clientId,timestamp:Math.floor(Date.now()/1e3),nonce:f()};return d.call(this,"oauth/token","DELETE",{headers:{Authorization:t},params:n})}},{key:"getClientInformation",value:function(){var t={client_id:this.clientId,timestamp:Math.floor(Date.now()/1e3),nonce:f()};return d.call(this,"oauth/balance","GET",{params:t})}},{key:"getUserInformation",value:function(t){var n={client_id:this.clientId,timestamp:Math.floor(Date.now()/1e3),nonce:f()};return d.call(this,"oauth/user-info","GET",{headers:{Authorization:t},params:n})}},{key:"getUserMiningAction",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.token,e=t.nextId,a=void 0===e?null:e,i={client_id:this.clientId,timestamp:Math.floor(Date.now()/1e3),nonce:f(),mining_key:this.miningKey},o={Authorization:n};return a&&(i.next_id=a),d.call(this,"mining","GET",{headers:o,params:i})}},{key:"postUserMiningAction",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.token,e=t.uuid,a=void 0===e?h():e,i=t.reward,o=void 0===i?1:i,r=t.happenedAt,c=void 0===r?null:r,u=new Date,l=function(t){return t.toString().padStart(2,0)},s={client_id:this.clientId,timestamp:Math.floor(Date.now()/1e3),nonce:f(),mining_key:this.miningKey,uuid:a,reward:o,happened_at:c||"".concat(u.getUTCFullYear(),"-").concat(l(u.getUTCMonth()),"-").concat(l(u.getUTCDate()),"T").concat(l(u.getUTCHours()),":").concat(l(u.getUTCMinutes()),":").concat(l(u.getUTCSeconds()))};return d.call(this,"mining","POST",{headers:{Authorization:n},data:s})}},{key:"deleteUserMiningAction",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.token,e=t.uuid,a={client_id:this.clientId,timestamp:Math.floor(Date.now()/1e3),nonce:f(),mining_key:this.miningKey,uuid:e||h()};return d.call(this,"mining","DELETE",{headers:{Authorization:n},params:a})}}])&&a(t.prototype,n),e&&a(t,e),i}()}(CryptoJS,axios);
